#:import Factory kivy.factory.Factory

<MyPopup@Popup>
	auto_dismiss: True
	size_hint: 0.2, 0.25
    padding: 10, 10, 10, 10
	title: "Record the EMG Signal"
	
	BoxLayout:
        cols: 1
        rows: 3
		orientation: "vertical"
		size: root.width, root.height
		Label:
			text: "Name of the file"
			font_size: 14
            text_size: self.width, None
            halign: 'left'
        TextInput:
            id: name_txt
            text: ''
            size_hint_y: None
            width: 40
            height: 40
        Button:
            size_hint_y: None
            width: 40
            height: 40
			text: "Save"
			font_size: 14
			on_press: app.root.text_popup(name_txt.text); root.dismiss()

<View>
    cols: 2
    rows: 1
    padding: 10, 10, 10, 10
    spacing: 10

    GridLayout:
        cols: 1
        rows: 3
        size_hint: None, None
        width: 400
        height: 650
        padding: 5, 5, 5, 5       
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Line:
                rectangle: self.x, self.y, self.width, self.height

        GridLayout:
            cols: 1
            rows: 1

            GridLayout:
                cols: 2
                rows: 1
            
                Image:
                    source: 'img/myo.jpg'
                    size_hint_y: 0.3

                GridLayout:
                    cols: 2
                    rows: 4

                    Label:
                        text: "Status"
                        font_size: 14
                        color: (0, 0, 0, 1)
                        #text_size: self.width, None
                        #halign: 'left'
                        #valign: 'middle'
                    
                    Label:
                        text: "Connect"
                        font_size: 14
                        color: (0, 0, 0, 1)

                    Label:
                        text: "Device Info"
                        font_size: 14
                        color: (0, 0, 0, 1)

                    Label:
                        id: device_status
                        text: "-"
                        font_size: 14
                        color: (0, 0, 0, 1)

                    Label:
                        text: "Battery Info"
                        font_size: 14
                        color: (0, 0, 0, 1)
                    
                    Label:
                        id: battery_status
                        text: "-"
                        font_size: 14
                        color: (0, 0, 0, 1)

                    Label:
                        text: "EMG Stream"
                        font_size: 14
                        color: (0, 0, 0, 1)
                    
                    Label:
                        id: stream_status
                        text: "-"
                        font_size: 14
                        color: (0, 0, 0, 1)

        GridLayout:
            cols: 2
            rows: 1
            size_hint_y: None
            height: 40

            Button:
                id: btn_start
                size_hint_y: None
                width: 60
                height: 40
                font_size: 14
                text: "Start"
                on_press: app.root.start_record()
            
            Button:
                size_hint_y: None
                width: 60
                height: 40
                font_size: 14
                text: "Record"
                on_release: Factory.MyPopup().open()
        
        GridLayout:
            cols: 1
            rows: 1

            TextInput:
                id: txt_hist
                text: ''
                multiline: True
                disabled: True


    GridLayout:
        cols: 1
        rows: 2
        size_hint: None, None
        width: 800
        height: 650
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Line:
                rectangle: self.x, self.y, self.width, self.height

        GridLayout:
            cols: 2
            rows: 4
            size_hint: None, None
            width: 800
            height: 350
            padding: 10, 15, 10, 15

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 1"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box0

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 2"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box1

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 3"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box2

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 4"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box3

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 5"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box4

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 6"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box5

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 7"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box6

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Channel 8"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box7

        GridLayout:
            cols: 1
            rows: 3
            size_hint: None, None
            width: 800
            height: 300
            padding: 10, 15, 10, 15
            canvas.before:
                Color:
                    rgba: 0, 0, 0, 1
                Line:
                    rectangle: self.x, self.y, self.width, self.height

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Gyroscope"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box_gyro

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Accelerometer"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box_acc

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Orientation"
                    text_size: self.width, None
                    halign: 'left'
                    padding_x: 40
                    color: 'black'
                    bold: True
                    size_hint_y: None
                    height: 20
                BoxLayout:
                    id: box_ori